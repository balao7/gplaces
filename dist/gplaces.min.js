!function t(e,i,n){function o(r,l){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){e.exports=t("./lib/base-view"),e.exports.proxy=t("./lib/server"),e.exports.http=t("./lib/http")},{"./lib/base-view":3,"./lib/http":4,"./lib/server":6}],2:[function(t,e,i){var n=t("./prediction-tmpl");e.exports=function(t){return['<div class="gplaces-popover-body">',t.predictions.map(function(t){return n(t)}).join("\n"),'  <div class="google-logo"></div>',"</div>"].join("\n")}},{"./prediction-tmpl":7}],3:[function(t,e,i){var n=t("./utils"),o=t("./input-model"),s=t("./selection-position-model");e.exports=function(e,i){return Object.create({el:e,options:n.defaults(i||{},{tmpl:t("./base-tmpl")}),init:function(){return this.model=o(function(t,e){return t?(console&&console.log(t),alert("Error!")):(e&&(this.selectionPosition=s(e.predictions.length,function(){this.renderPosition()}.bind(this))),void this.render(e))}.bind(this)),this.selectionPosition=s(),this.popoverEl=document.createElement("div"),this.popoverEl.classList.add("gplaces-popover","hide"),this.el.getAttribute("data-variant")&&this.popoverEl.classList.add.apply(this.popoverEl.classList,this.el.getAttribute("data-variant").split(" ")),this.options.wrapper?this.options.wrapper.appendChild(this.popoverEl):this.el.parentNode.insertBefore(this.popoverEl,this.el.nextSibling),this.el.addEventListener("keyup",this.onInputKeyup.bind(this)),this.popoverEl.addEventListener("click",this.onPredictionClickDelegation.bind(this)),document.addEventListener("click",this.onBodyClick.bind(this)),this},render:function(t){return t&&(this.popoverEl.innerHTML=this.options.tmpl(t),1===t.predictions.length&&this.hide()),this.renderPosition(),this},renderPosition:function(){if(-1===this.selectionPosition.pos)return this;var t=this.popoverEl.querySelector(".active");return t&&t.classList.remove("active"),t=this.popoverEl.querySelectorAll(".gplaces-prediction")[this.selectionPosition.pos],t.classList.add("active"),this.model.value=t.getAttribute("data-value"),this.safelySetElementValue(),this},safelySetElementValue:function(){return this.el.value!=this.model.val()&&(this.el.value=this.model.val()),this},isShowing:function(){return!this.popoverEl.classList.contains("hide")},hide:function(){return console.log("hide!"),this.popoverEl.classList.add("hide"),this},show:function(){return this.popoverEl.classList.remove("hide"),this},cursorToEnd:function(){return this.el.selectionStart=this.el.selectionEnd=this.el.value.length,this},onInputKeyup:function(t){if(this.model.val(t.target.value),13===t.keyCode)return this.hide();if(this.isShowing()){var e=n.parseDirectionalKeyEvent(t);e&&(this.selectionPosition[e](),"up"===e&&setTimeout(this.cursorToEnd.bind(this),1))}this.model.val().length?this.isShowing()||setTimeout(this.show.bind(this),100):this.isShowing()&&this.hide()},onPredictionClick:function(t){this.model.val(t.target.getAttribute("data-value")),this.safelySetElementValue()},onPredictionClickDelegation:function(t){for(var e=!1,i=0;!(t.target.classList.contains("gplaces-popover-body")||++i>5);)if(t.target=t.target.parentElement,t.target.classList.contains("gplaces-prediction")){e=!0;break}return e?void this.onPredictionClick(t):!0},onBodyClick:function(t){var e=n.isOutsideOf(this.popoverEl,this.el);e(t.target)&&this.hide()}}).init()}},{"./base-tmpl":2,"./input-model":5,"./selection-position-model":8,"./utils":9}],4:[function(t,e,i){e.exports=function(t,i){e.exports.makeRequest=t},e.exports.makeRequest=function(){throw console.warn("Did not implement http function"),console.warn("Use something like:"),console.warn("  gplaces.http( function( input, callback ){"),console.warn("    request.get('/my-api/endpoint')"),console.warn("      .query({ input: input })"),console.warn("      .end( callback )"),console.warn("  }"),new Error("Must implement http functionality calling gplaces.http( callback )")}},{}],5:[function(t,e,i){var n=t("./http");e.exports=function(t){return Object.create({val:function(e){return void 0===e?this.value:e===this.value?this:(this.value=e,t(),this.makeRequest(),this)},makeRequest:function(){n.makeRequest(this.val(),function(e,i){return e?t(e):t(null,i.body)})}})}},{"./http":4}],6:[function(t,e,i){e.exports=function(){}},{}],7:[function(t,e,i){e.exports=function(t){for(var e,i,n,o,s="",r=!1,l=!1,a=0,c=t.description.length;c>a;a++){for(i=t.description[a],r=!1,l=!1,n=0,o=t.matched_substrings.length;o>n;n++){if(e=t.matched_substrings[n],e.offset===a){r=!0;break}if(e.offset+e.length===a){l=!0;break}}s+=r?'<span class="highlight">'+i:l?i+"</span>":i}return['<div class="gplaces-popover-item gplaces-prediction" data-value="'+t.description+'">',s,"</div>"].join("\n")}},{}],8:[function(t,e,i){e.exports=function(t,e){return e=e||function(){},Object.create({length:t||0,pos:-1,up:function(){return this.set(this.pos-1)},down:function(){return this.set(this.pos+1)},set:function(t){return t===this.pos?this:(this.pos=Math.max(-1,Math.min(t,this.length-1)),e(this.pos),this)}})}},{}],9:[function(t,e,i){e.exports.defaults=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},e.exports.mixin=function(t){for(var e,i,n=Array.prototype.slice.call(arguments,1);n.length;){e=n.pop();for(i in e)t[i]=e[i]}return t},e.exports.isOutsideOf=function(){var t=Array.prototype.slice.call(arguments),e=function(i){return t.indexOf(i)>-1?!1:null===i?!0:e(i.parentElement)};return e},e.exports.parseDirectionalKeyEvent=function(t){return t.keyCode?{38:"up",40:"down"}[t.keyCode]||null:null}},{}]},{},[1]);