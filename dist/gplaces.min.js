!function t(e,i,n){function r(s,l){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){var n=t("./");"function"==typeof window.define&&window.define.amd?window.define("gplaces",function(){return n}):window.gplaces=n},{"./":2}],2:[function(t,e,i){e.exports=t("./lib/base-view"),e.exports.proxy=t("./lib/server"),e.exports.http=t("./lib/http"),t("./lib/register-browser-content")(e.exports)},{"./lib/base-view":4,"./lib/http":7,"./lib/register-browser-content":11,"./lib/server":9}],3:[function(t,e,i){var n=t("./prediction-tmpl");e.exports=function(t){return['<div class="gplaces-popover-body">',t.predictions.map(function(t){return n(t)}).join("\n"),'  <div class="google-logo"></div>',"</div>"].join("\n")}},{"./prediction-tmpl":10}],4:[function(t,e,i){var n=t("./utils"),r=t("./errors"),o=t("./input-model"),s=t("./selection-position-model");e.exports=function(e,i){return Object.create({el:e,options:n.defaults(i||{},{tmpl:t("./base-tmpl"),errorTmpl:t("./error-tmpl")}),init:function(){return this.model=o(function(t,e){if(t)return this.renderError(r("UNKNOWN"));if(e&&"OK"!==e.status){if("ZERO_RESULTS"!==e.status)return this.renderError(r(e.status));e.predictions=[]}e&&e.predictions&&(this.selectionPosition=s(e.predictions.length,function(){this.renderPosition()}.bind(this))),this.render(e)}.bind(this)),this.selectionPosition=s(),this.popoverEl=document.createElement("div"),this.popoverEl.classList.add("gplaces-popover","hide"),this.el.getAttribute("data-variant")&&this.popoverEl.classList.add.apply(this.popoverEl.classList,this.el.getAttribute("data-variant").split(" ")),this.options.target?this.options.target.appendChild(this.popoverEl):this.el.parentNode.insertBefore(this.popoverEl,this.el.nextSibling),this.el.addEventListener("keyup",this.onInputKeyup.bind(this)),this.popoverEl.addEventListener("click",this.onPredictionClickDelegation.bind(this)),document.addEventListener("click",this.onBodyClick.bind(this)),this},renderError:function(t){return console&&console.log(t),this.popoverEl.innerHTML=this.options.errorTmpl(t),this},render:function(t){return t&&(this.popoverEl.innerHTML=this.options.tmpl(t)),this.renderPosition(),this},renderPosition:function(){if(-1===this.selectionPosition.pos)return this;var t=this.popoverEl.querySelector(".active");return t&&t.classList.remove("active"),t=this.popoverEl.querySelectorAll(".gplaces-prediction")[this.selectionPosition.pos],t.classList.add("active"),this.model.value=t.getAttribute("data-value"),this.safelySetElementValue(),this},safelySetElementValue:function(){return this.el.value!=this.model.val()&&(this.el.value=this.model.val()),this},isShowing:function(){return!this.popoverEl.classList.contains("hide")},hide:function(){return this.popoverEl.classList.add("hide"),this},show:function(){return this.popoverEl.classList.remove("hide"),console.log("showing ",this.el.getAttribute("data-variant")),this},cursorToEnd:function(){return this.el.selectionStart=this.el.selectionEnd=this.el.value.length,this},onInputKeyup:function(t){if(this.model.val(t.target.value),13===t.keyCode)return this.hide();if(this.isShowing()){var e=n.parseDirectionalKeyEvent(t);e&&(this.selectionPosition[e](),"up"===e&&setTimeout(this.cursorToEnd.bind(this),1))}this.model.val().length?this.isShowing()||setTimeout(this.show.bind(this),100):this.isShowing()&&this.hide()},onPredictionClick:function(t){this.model.val(t.target.getAttribute("data-value")),this.safelySetElementValue()},onPredictionClickDelegation:function(t){for(var e=!1,i=0;!(t.target.classList.contains("gplaces-popover-body")||++i>5);)if(t.target=t.target.parentElement,t.target.classList.contains("gplaces-prediction")){e=!0;break}return e?void this.onPredictionClick(t):!0},onBodyClick:function(t){var e=n.isOutsideOf(this.popoverEl,this.el);e(t.target)&&this.hide()}}).init()}},{"./base-tmpl":3,"./error-tmpl":5,"./errors":6,"./input-model":8,"./selection-position-model":12,"./utils":13}],5:[function(t,e,i){e.exports=function(t){var e=t.message||"There was an error with the request";return['<div class="error">'+e+"</div>"].join("\n")}},{}],6:[function(t,e,i){e.exports=function(t){var i=t in e.exports.errors?e.exports.errors[t]:e.exports.errors.UNKNOWN,n=new Error(i.message);return n.code=i.code,n},e.exports.errors={},e.exports.errors.UNKNOWN={code:"UNKNOWN",message:"There was an error with the request"},e.exports.errors.OVER_QUERY_LIMIT={code:"OVER_QUERY_LIMIT",message:"You are over your quota"},e.exports.errors.REQUEST_DENIED={code:"REQUEST_DENIED",message:"Request was denied. Perhaps check your api key?"},e.exports.errors.INVALID_REQUEST={code:"INVALID_REQUEST",message:"Invalid request. Perhaps you're missing the input param?"}},{}],7:[function(t,e,i){e.exports=function(t,i){e.exports.makeRequest=t},e.exports.makeRequest=function(){throw console.warn("Did not implement http function"),console.warn("Use something like:"),console.warn("  gplaces.http( function( input, callback ){"),console.warn("    request.get('/my-api/endpoint')"),console.warn("      .query({ input: input })"),console.warn("      .end( callback )"),console.warn("  }"),new Error("Must implement http functionality calling gplaces.http( callback )")}},{}],8:[function(t,e,i){var n=t("./http");e.exports=function(t){return Object.create({val:function(e){return void 0===e?this.value:e===this.value?this:(this.value=e,t(),-1===[null,""].indexOf(e)&&this.makeRequest(),this)},makeRequest:function(){n.makeRequest(this.val(),function(e,i){return e?t(e):i.body?t(null,i.body):Array.isArray(i.predictions)?t(null,i):void 0})}})}},{"./http":7}],9:[function(t,e,i){e.exports=function(){}},{}],10:[function(t,e,i){e.exports=function(t){for(var e,i,n,r,o="",s=!1,l=!1,a=0,u=t.description.length;u>a;a++){for(i=t.description[a],s=!1,l=!1,n=0,r=t.matched_substrings.length;r>n;n++){if(e=t.matched_substrings[n],e.offset===a){s=!0;break}if(e.offset+e.length===a){l=!0;break}}o+=s?'<span class="highlight">'+i:l?i+"</span>":i}return['<div class="gplaces-popover-item gplaces-prediction" data-value="'+t.description+'">',o,"</div>"].join("\n")}},{}],11:[function(t,e,i){e.exports=function(t){document.addEventListener("DOMContentLoaded",function(){for(var e,i,n,r=document.querySelectorAll("[data-gplaces]"),o=0;o<r.length;o++)e=r[o],i={},n=e.getAttribute("data-target"),n&&(i.target=document.querySelector(n)),t(e,i)})}},{}],12:[function(t,e,i){e.exports=function(t,e){return e=e||function(){},Object.create({length:t||0,pos:-1,up:function(){return this.set(this.pos-1)},down:function(){return this.set(this.pos+1)},set:function(t){return t===this.pos?this:(this.pos=Math.max(-1,Math.min(t,this.length-1)),e(this.pos),this)}})}},{}],13:[function(t,e,i){e.exports.defaults=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},e.exports.mixin=function(t){for(var e,i,n=Array.prototype.slice.call(arguments,1);n.length;){e=n.pop();for(i in e)t[i]=e[i]}return t},e.exports.isOutsideOf=function(){var t=Array.prototype.slice.call(arguments),e=function(i){return t.indexOf(i)>-1?!1:null===i?!0:e(i.parentElement)};return e},e.exports.parseDirectionalKeyEvent=function(t){return t.keyCode?{38:"up",40:"down"}[t.keyCode]||null:null}},{}]},{},[1]);